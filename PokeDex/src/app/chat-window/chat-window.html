<div class="chat-container">
  <!-- Chat Toggle Button -->
  <button class="chat-toggle" (click)="toggleChat()" [class.open]="isOpen()">
    <span class="chat-icon">💬</span>
    <span class="chat-label">Chat with AI</span>
  </button>

  <!-- Chat Window -->
  @if (isOpen()) {
    <div class="chat-window">
      <div class="chat-header">
        <h3>Pokemon AI Assistant</h3>
        <div class="chat-controls">
          <button class="clear-btn" (click)="clearChat()" title="Clear chat">
            🗑️
          </button>
          <button class="close-btn" (click)="toggleChat()" title="Close chat">
            ✕
          </button>
        </div>
      </div>

      <div class="chat-messages">
        @if (messages().length === 0) {
          <div class="welcome-message">
            <p>👋 Hello! I'm your Pokemon AI assistant. Ask me anything about Pokemon!</p>
            <p>Try asking:</p>
            <ul>
              <li>"Tell me about Charizard"</li>
              <li>"What are the best moves for Pikachu?"</li>
              <li>"Explain type advantages"</li>
            </ul>
          </div>
        }

        @for (message of messages(); track message.id) {
          <div class="message" [class.user-message]="message.isUser" [class.ai-message]="!message.isUser">
            <div class="message-content">
              <div class="message-text">{{ message.content }}</div>
              <div class="message-time">
                {{ message.timestamp | date:'shortTime' }}
              </div>
            </div>
          </div>
        }

        @if (isLoading()) {
          <div class="message ai-message">
            <div class="message-content">
              <div class="loading-indicator">
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
              </div>
            </div>
          </div>
        }
      </div>

      <div class="chat-input-container">
        <div class="input-wrapper">
          <textarea
            class="chat-input"
            placeholder="Ask me about Pokemon..."
            [value]="inputMessage()"
            (input)="onInputChange($event)"
            (keypress)="onKeyPress($event)"
            rows="1"
            #messageInput
          ></textarea>
          <button 
            class="send-btn" 
            (click)="sendMessage()"
            [disabled]="!inputMessage().trim() || isLoading()"
          >
            ➤
          </button>
        </div>
      </div>
    </div>
  }
</div> 